{"ast":null,"code":"var _jsxFileName = \"/Users/samzimmerman/Documents/Apps/Website/src/Weather/Chart.tsx\";\nimport * as d3 from \"d3\";\nimport React, { useRef, useEffect } from \"react\";\n\nfunction Chart({\n  width,\n  height,\n  data\n}) {\n  const ref = useRef(null);\n  var margin = {\n    top: 20,\n    right: 50,\n    bottom: 30,\n    left: 40\n  };\n  var dateDomain = d3.extent(data, d => parseInt(d.date));\n  var tempRange = d3.extent(data, d => parseFloat(d.temps[0]));\n  var x = d3.scaleUtc().domain(dateDomain).range([margin.left, width - margin.right]);\n  var y = d3.scaleLinear().domain(tempRange).nice().range([height - margin.bottom, margin.top]);\n  useEffect(() => {\n    const svg = d3.select(ref.current);\n    svg.attr(\"width\", width).attr(\"height\", height).style(\"border\", \"1px solid black\");\n    svg.append(\"g\").call(yAxis);\n    svg.append(\"g\").call(xAxis);\n    svg.append(\"text\").call(lineLabel); // svg.append(\"circle\").call(endCircle);\n\n    svg.append(\"path\").datum(data).attr(\"fill\", \"none\").attr(\"stroke\", \"steelblue\").attr(\"stroke-width\", 1.5).attr(\"stroke-linejoin\", \"round\").attr(\"stroke-linecap\", \"round\").attr(\"d\", line);\n  }, [data]);\n  let line = d3.line().x(d => x(d.date)).y(d => y(parseFloat(d.temps[0])));\n\n  let yAxis = g => g.attr(\"transform\", `translate(${margin.left}, 0)`).call(d3.axisLeft(y)).call(g => g.select(\".domain\").remove()).call(g => g.select(\".tick:last-of-type text\").clone().attr(\"x\", 3).attr(\"text-anchor\", \"start\").attr(\"font-weight\", \"bold\").text(\"Temperature\"));\n\n  function xAxis(g) {\n    g.attr(\"transform\", `translate(0,${height - margin.bottom})`).call(d3.axisBottom(x).ticks(width / 80).tickSizeOuter(0));\n  }\n\n  var lastTime;\n  var lastTemp;\n\n  if (data) {\n    try {\n      lastTime = data[data.length - 1].date;\n      lastTemp = parseFloat(data[data.length - 1].temps[0]);\n    } catch (error) {\n      console.log(\"failed\");\n    }\n  }\n\n  function lineLabel(g) {\n    g.attr(\"transform\", \"translate(\" + (width - margin.left) + \",\" + y(lastTemp) + \")\").attr(\"dy\", \".35em\").attr(\"text-anchor\", \"start\").style(\"fill\", \"steelblue\").text(lastTemp);\n  }\n\n  function endCircle(g) {\n    g.attr(\"fill\", \"red\").attr(\"stroke\", \"none\").attr(\"transform\", \"translate(\" + x(lastTime) + \",\" + y(lastTemp) + \")\").attr(\"r\", 3);\n  }\n\n  const draw = () => {\n    const svg = d3.select(ref.current);\n    var selection = svg.selectAll(\"rect\").data(data); // selection\n    //   .transition()\n    //   .duration(300)\n    //   .attr(\"height\", (d: any) => y(d))\n    //   .attr(\"y\", (d: any) => height - y(d));\n\n    selection.enter().append(\"rect\").attr(\"x\", (d, i) => i * 45 + 45).attr(\"y\", d => height).attr(\"width\", 40).attr(\"height\", 0).attr(\"fill\", \"orange\").transition().duration(1000).attr(\"height\", d => y(d)).attr(\"y\", d => height - y(d)); // selection\n    //   .exit()\n    //   .transition()\n    //   .duration(300)\n    //   .attr(\"y\", (d) => height)\n    //   .attr(\"height\", 0)\n    //   .remove();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default Chart;","map":{"version":3,"sources":["/Users/samzimmerman/Documents/Apps/Website/src/Weather/Chart.tsx"],"names":["d3","React","useRef","useEffect","Chart","width","height","data","ref","margin","top","right","bottom","left","dateDomain","extent","d","parseInt","date","tempRange","parseFloat","temps","x","scaleUtc","domain","range","y","scaleLinear","nice","svg","select","current","attr","style","append","call","yAxis","xAxis","lineLabel","datum","line","g","axisLeft","remove","clone","text","axisBottom","ticks","tickSizeOuter","lastTime","lastTemp","length","error","console","log","endCircle","draw","selection","selectAll","enter","i","transition","duration"],"mappings":"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","sourcesContent":["import * as d3 from \"d3\";\nimport { schemeGnBu } from \"d3\";\nimport React, { useRef, useEffect } from \"react\";\n\ntype propsStructure = {\n  width: number;\n  height: number;\n  data: dataStructure;\n};\ntype dataStructure = {\n  date: number;\n  temps: [string, string];\n};\n\nfunction Chart({ width, height, data }: any) {\n  const ref = useRef(null);\n\n  var margin = { top: 20, right: 50, bottom: 30, left: 40 };\n  var dateDomain = d3.extent(data, (d: any) => parseInt(d.date));\n  var tempRange = d3.extent(data, (d: any) => parseFloat(d.temps[0]));\n\n  var x = d3\n    .scaleUtc()\n    .domain(dateDomain as [number, number])\n    .range([margin.left, width - margin.right]);\n\n  var y = d3\n    .scaleLinear()\n    .domain(tempRange as [number, number])\n    .nice()\n    .range([height - margin.bottom, margin.top]);\n\n  useEffect(() => {\n    const svg = d3.select(ref.current);\n\n    svg\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .style(\"border\", \"1px solid black\");\n\n    svg.append(\"g\").call(yAxis);\n    svg.append(\"g\").call(xAxis);\n    svg.append(\"text\").call(lineLabel);\n    // svg.append(\"circle\").call(endCircle);\n    svg\n      .append(\"path\")\n      .datum(data)\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", \"steelblue\")\n      .attr(\"stroke-width\", 1.5)\n      .attr(\"stroke-linejoin\", \"round\")\n      .attr(\"stroke-linecap\", \"round\")\n      .attr(\"d\", line);\n  }, [data]);\n\n  let line = d3\n    .line()\n    .x((d: any) => x(d.date))\n    .y((d: any) => y(parseFloat(d.temps[0])));\n\n  let yAxis = (g: any) =>\n    g\n      .attr(\"transform\", `translate(${margin.left}, 0)`)\n      .call(d3.axisLeft(y))\n      .call((g: any) => g.select(\".domain\").remove())\n      .call((g: any) =>\n        g\n          .select(\".tick:last-of-type text\")\n          .clone()\n          .attr(\"x\", 3)\n          .attr(\"text-anchor\", \"start\")\n          .attr(\"font-weight\", \"bold\")\n          .text(\"Temperature\")\n      );\n\n  function xAxis(g: any) {\n    g.attr(\"transform\", `translate(0,${height - margin.bottom})`).call(\n      d3\n        .axisBottom(x)\n        .ticks(width / 80)\n        .tickSizeOuter(0)\n    );\n  }\n  var lastTime: number;\n  var lastTemp: number;\n  if (data) {\n    try {\n      lastTime = data[data.length - 1].date;\n      lastTemp = parseFloat(data[data.length - 1].temps[0]);\n    } catch (error) {\n      console.log(\"failed\");\n    }\n  }\n  function lineLabel(g: any) {\n    g.attr(\n      \"transform\",\n      \"translate(\" + (width - margin.left) + \",\" + y(lastTemp) + \")\"\n    )\n      .attr(\"dy\", \".35em\")\n      .attr(\"text-anchor\", \"start\")\n      .style(\"fill\", \"steelblue\")\n      .text(lastTemp);\n  }\n  function endCircle(g: any) {\n    g.attr(\"fill\", \"red\")\n      .attr(\"stroke\", \"none\")\n      .attr(\"transform\", \"translate(\" + x(lastTime) + \",\" + y(lastTemp) + \")\")\n      .attr(\"r\", 3);\n  }\n\n  const draw = () => {\n    const svg = d3.select(ref.current);\n    var selection = svg.selectAll(\"rect\").data(data);\n\n    // selection\n    //   .transition()\n    //   .duration(300)\n    //   .attr(\"height\", (d: any) => y(d))\n    //   .attr(\"y\", (d: any) => height - y(d));\n\n    selection\n      .enter()\n      .append(\"rect\")\n      .attr(\"x\", (d, i) => i * 45 + 45)\n      .attr(\"y\", (d) => height)\n      .attr(\"width\", 40)\n      .attr(\"height\", 0)\n      .attr(\"fill\", \"orange\")\n      .transition()\n      .duration(1000)\n      .attr(\"height\", (d: any) => y(d))\n      .attr(\"y\", (d: any) => height - y(d));\n\n    // selection\n    //   .exit()\n    //   .transition()\n    //   .duration(300)\n    //   .attr(\"y\", (d) => height)\n    //   .attr(\"height\", 0)\n    //   .remove();\n  };\n\n  return (\n    <div className=\"chart\">\n      <svg ref={ref}></svg>\n    </div>\n  );\n}\n\nexport default Chart;\n"]},"metadata":{},"sourceType":"module"}